<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Boolzapp</title>
    <link rel="shortcut icon" href="./assets/images/logo.png" type="image/x-icon">
    <!-- Include custom css file -->
    <link rel="stylesheet" href="./css/style.css">
    <link rel="stylesheet" href="./css/scrollbar.css">
    <!-- Include bootstrap css and js-->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-aFq/bzH65dt+w6FI2ooMVUpc+21e0SRygnTpmBvdBgSdnuTN7QbdgL+OapgHtvPp" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha2/dist/js/bootstrap.bundle.min.js" integrity="sha384-qKXV1j0HvMUeCBQ+QVp7JcfGl760yU08IQ+GpUo5hlbpg51QRiuqHAJz8+BrxE/N" crossorigin="anonymous"></script>
    <!-- Include vue library -->
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <!-- Include Fontawesome library -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.1/css/all.min.css" integrity="sha512-MV7K8+y+gLIBoVD59lQIYicR65iaqukzvf/nwasF0nqhPay5w/9lJmVM2hMDcnK1OnMGCdVK+iQrJ7lzPJQd1w==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <!-- Include custom js file -->
    <script src="./js/utility.js" defer></script>
    <script src="./js/script.js" defer></script>
</head>
<body>
    <div id="app">
        <div id="coloredStripe"></div>
        <div id="neutralStripe"></div>
        <div id="mainContainer" class="d-flex justify-content-center align-items-center">
            <div id="form" class="d-flex">
                <div id="formLeft" class="col-4">
                    <div class="formHeader d-flex justify-content-between align-items-center p-2">
                        <div class="profile d-flex align-items-center px-1">
                            <img class="rounded-circle" :src="profile.avatar" :alt="'Avatar di '+profile.name" draggable="false">
                            <span class="fw-semibold ps-2 fs-6">{{profile.name}}</span>
                        </div>
                        <div class="actions d-flex align-items-center px-4">
                            <i class="fa-solid fa-circle-notch headerIcon fs-4 ps-4"></i>
                            <i class="fa-solid fa-message headerIcon fs-4 ps-4"></i>
                            <i class="fa-solid fa-ellipsis-vertical headerIcon fs-4 ps-4"></i>
                        </div>
                    </div>
                    <div class="formContent d-flex flex-column gap-1">
                        <div id="disableNotify" class="d-flex justify-content-between align-items-center p-3">
                            <div id="bell" class="rounded-circle overflow-hidden d-flex justify-content-center align-items-center">
                                <i class="fa-solid fa-bell-slash fs-5 p-2 headerIcon"></i>
                            </div>
                            <div class="d-flex flex-column flex-fill">
                                <span class="fw-semibold ps-2 fs-6">Ricevi notifiche di nuovi messaggi</span>
                                <span class="fw-semibold ps-2 fs-7 text-decoration-underline activeNotifyColor">Attiva notifiche desktop</span>
                            </div>
                        </div>
                        <div class="input-group px-2 pt-1">
                            <span class="input-group-text bg-white px-4" id="searchChatIcon">
                                <i class="fa-solid fa-magnifying-glass headerIcon"></i>
                            </span>
                            <input id="searchChat" v-model="chatToSearch" type="text" class="form-control" placeholder="Cerca o inizia una nuova chat" aria-describedby="searchChatIcon">
                        </div>
                        <div :id="'contact'+index" v-for="(contact,index) in contacts" @click="OpenContact(index)" class="contact d-flex p-3 rounded m-1 mb-0" :class="contact.id==contactOpened.id ? 'active' : ''">
                            <div class="profile d-flex justify-content-between align-items-center px-1">
                                <div class="d-flex">
                                    <img class="rounded-circle" :src="contact.avatar" :alt="'Avatar di '+contact.name" draggable="false">
                                    <div class="d-flex flex-column">
                                        <span class="fw-semibold ps-2 fs-6">{{contact.name}}</span>
                                        <span class="fw-semibold ps-2 fs-6 headerIcon">{{contact.messages[contact.messages.length-1].message}}</span>
                                    </div>
                                </div>
                                <span class="fs-6 headerIcon align-self-start">{{contact.messages[contact.messages.length-1].dateAbbreviation}}</span>
                            </div>
                        </div>
                    </div>
                </div>
                <div id="formRight" class="col-8">
                    <div class="formHeader d-flex justify-content-between align-items-center p-2" v-if="contactOpened.id>0">
                        <div class="profile d-flex align-items-center px-2">
                            <img class="rounded-circle" :src="contactOpened.avatar" :alt="'Avatar di '+contactOpened.name" draggable="false">
                            <div class="d-flex flex-column">
                                <span class="fw-semibold ps-3 fs-6">{{contactOpened.name}}</span>
                                <span class="fw-semibold ps-3 fs-7 headerIcon lastAccessColor">Ultimo accesso {{contactOpened.lastAccess}}</span>
                            </div>
                        </div>
                        <div class="actions d-flex align-items-center px-4">
                            <i class="fa-solid fa-magnifying-glass headerIcon fs-4 ps-4"></i>
                            <i class="fa-solid fa-paperclip headerIcon fs-4 ps-4"></i>
                            <i class="fa-solid fa-ellipsis-vertical headerIcon fs-4 ps-4"></i>
                        </div>
                    </div>
                    <div class="formContent d-flex flex-column overflow-hidden" v-if="contactOpened.id>0">
                        <div id="readMessagesDiv" class="d-flex flex-column overflow-y-auto" :style="'background-image: url('+contactOpened.backgroundImage+');'">
                            <div :id="'message'+index" v-for="(message,index) in contactOpened.messages" class="message d-flex flex-column rounded m-1" :class="message.status=='sent' ? 'messageByMe' : ''">
                                <span class="p-3 pb-1">{{message.message}}</span>
                                <span class="p-1 pt-0 align-self-end headerIcon fs-8">{{message.timeAbbreviation}}</span>
                            </div>
                        </div>
                        <div id="writeMessagesDiv" class="d-flex justify-content-around align-items-center">
                            <i class="fa-regular fa-face-smile conversationBarColor fs-4 flex-fill text-center"></i>
                            <input type="text" name="messageToSend" id="messageToSend" class="conversationBarColor rounded border-0 fs-6 col-10 p-2" v-model="contactOpened.newMessageToSend" placeholder="Scrivi un messaggio">
                            <i class="fa-solid fa-microphone conversationBarColor fs-4 flex-fill text-center"></i>
                        </div>
                    </div>
                    <div class="formContent d-flex justify-content-center align-items-center flex-column p-4" v-else>
                        <h1 class="headerIcon fa-solid fa-shield-cat pb-4"></h1>
                        <h2 class="fs-5">Boolzap per Windows</h2>
                        <p class="fs-6 headerIcon">Invia e ricevi messaggi senza mantenere il telefono connesso a Internet.<br>Usa Boolzap su un massimo di 4 dispositivi e 1 telefono  contemporaneamente.</p>
                        <p class="fs-6 d-flex align-items-center gap-2 pt-4 headerIcon">
                            <i class="fa-solid fa-lock"></i>
                            <span>Con crittografia end-to-end</span>
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</body>
</html>